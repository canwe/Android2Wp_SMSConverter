# Android2Wp_SMSConverter

**Android2Wp_SMSConverter** is a Python3 script to convert SMS from Android to Windows Phone and is able to generate *.hsh* checksum file to import *.msg* file using contact+message backup app.
The script will append all SMS from Android to the Windows Phone backup and regenerate a valid integrity checksum

### Conversion usage

1. On Android phone:
  * Download [SMS Backup&Restore](https://play.google.com/store/apps/details?id=com.riteshsahu.SMSBackupRestore&hl=en) application
  * Backup SMS to a XML file
  * Copy *.xml* file on the computer

2. On Windows Phone:
  * Download [contact+message backup](https://www.microsoft.com/en-us/store/apps/contacts-message-backup/9nblgggz57gm) application
  * Backup SMS
  * Copy *.msg* file on the computer

3. On the computer:
You have multiple options to convert files
  1. Option 1 - The easy way
  * Visit https://android2wpsmsconverter.pythonanywhere.com/, send your  files, convert them and extract the files from the generated zip archive.
  2. Option 2 - The Do It Myself (online) way
  * Create an account on https://www.pythonanywhere.com/
  * Start a new Bash console
  * In the console, execute following command:
  ```bash
  $ git clone https://github.com/gpailler/Android2Wp_SMSConverter
  ```
  * In PythonAnywhere management, select Files section and import *.xml* and *.msg* files in Android2Wp_SMSConverter folder.
  * In the console, execute following commands:
  ```bash
  $ cd Android2Wp_SMSConverter
  $ python3.4 converter.py convert --xml android.xml --msg windowsphone.msg
  ```
  * Finally, you can retrieve generated file
  3. Option 3 - The hard way
  * Clone this project, create a virtual env to retrieve dependencies and launch the conversion process
  ```
  $ git clone https://github.com/gpailler/Android2Wp_SMSConverter
  $ cd Android2Wp_SMSConverter
  $ pyvenv venv
  $ source venv/bin/activate
  $ pip install -r requirements.txt
  $ python converter.py convert --xml android.xml --msg windowsphone.msg
  ```
  * Copy generated files **result.msg** and **result.hsh** on the Windows Phone

4. On Windows Phone:
  * Launch messaging application, click select then select all (in extended menu) and delete all messages
  * Launch contact+message backup application and restore all SMS

### Checksum generation only
If you have manually modified a *.msg* backup file generated by  contact+message backup Windows app, you can generate the associated *.hsh* checksum file using this script. You can use the [online way](https://android2wpsmsconverter.pythonanywhere.com/) or use the following command line
```bash
$ python converter.py createchecksum --msg windowsphone.msg
```

### Background

I switched from Android to Windows Phone. I tried to use **Transfer my data** application but this app was unable to copy SMS.
So I searched applications to export/import SMS on these two platforms and wrote this script to achieve the conversion.
The only tricky part was to generate the integrity check required by Windows Phone app to be able to import SMS. I used lot of [magic](http://gph.is/Quih86) to achieve this part.
